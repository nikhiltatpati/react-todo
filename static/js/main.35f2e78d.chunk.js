(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){},104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),i=a.n(o),l=a(34),c=a(23),s=a(54),u=a(19),d=a(30);d.initializeApp({apiKey:"AIzaSyAHpQY86O6w2nyhOySrVJgNXE1OXKeXf0Y",authDomain:"react-todo-a38d3.firebaseapp.com",databaseURL:"https://react-todo-a38d3.firebaseio.com",projectId:"react-todo-a38d3",storageBucket:"react-todo-a38d3.appspot.com",messagingSenderId:"1064216342063",appId:"1:1064216342063:web:68692dde5a37c2238e60da"});var m=d.database().ref().child("todos"),p=d.auth(),h={googleProvider:new d.auth.GoogleAuthProvider},b=Object(c.c)({todoData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{todos:[],loading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TODOS_START":return Object(u.a)({},e,{loading:!0});case"FETCH_TODOS_ERROR":return Object(u.a)({},e,{loading:!1,error:t.error});case"FETCH_TODOS_COMPLETED":return Object(u.a)({},e,{loading:!1});case"FETCH_TODOS_EVENT":if(!t.payload)return Object(u.a)({},e,{todos:[],loading:!1});var a=Object.keys(t.payload).map(function(e){return t.payload[e].id=e,t.payload[e]}).sort(function(e,t){return t.priority.localeCompare(e.priority)});return Object(u.a)({},e,{todos:a,loading:!1});default:return e}}});a(80),a(81);var f=a(7),y=a(8),O=a(10),E=a(9),v=a(11),g=a(56),j=a(108),T=a(106),C=a(33),S=a(20),D=a.n(S),k=a(107),w={0:{title:"Low",class:"text-info"},1:{title:"Medium",class:"text-warning"},2:{title:"High",class:"text-danger"}},N=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(O.a)(this,Object(E.a)(t).call(this,e))).inputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(C.a)({},n,r))},a.formSubmitted=function(e){if(e.preventDefault(),e.stopPropagation(),a.setState({validated:!0}),!1!==e.currentTarget.checkValidity()){var t=a.state,n=t.name,r=t.priority,o=t.date;(0,a.props.formSubmit)({name:n,priority:r,date:o}),a.setState({name:"",priority:"",date:D()().format("YYYY-MM-DDTHH:mm")})}},a.state={name:"",priority:"0",date:D()().add(2,"hours").format("YYYY-MM-DDTHH:mm"),validated:!1},a}return Object(v.a)(t,e),Object(y.a)(t,[{key:"renderPriorityOptions",value:function(){return Object.keys(w).map(function(e){return r.a.createElement("option",{key:e,value:e},w[e].title)})}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.priority,n=e.date,o=e.validated;return r.a.createElement(k.a,{noValidate:!0,validated:o,onSubmit:this.formSubmitted},r.a.createElement(k.a.Group,{controlId:"priority"},r.a.createElement(k.a.Label,null,"Priority"),r.a.createElement(k.a.Control,{required:!0,as:"select",value:a,onChange:this.inputChange,name:"priority"},this.renderPriorityOptions())),r.a.createElement(k.a.Group,{controlId:"due-date"},r.a.createElement(k.a.Label,null,"Due date"),r.a.createElement(k.a.Control,{required:!0,type:"datetime-local",value:n,onChange:this.inputChange,name:"date"})),r.a.createElement(k.a.Group,{controlId:"name"},r.a.createElement(k.a.Label,null,"Name"),r.a.createElement(k.a.Control,{required:!0,type:"text",value:t,placeholder:"Enter todo name",onChange:this.inputChange,name:"name"}),r.a.createElement(k.a.Control.Feedback,{type:"invalid"},"Please enter a todo.")),r.a.createElement(j.a,{variant:"primary",type:"submit"},"Create"))}}]),t}(r.a.Component),_=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(O.a)(this,Object(E.a)(t).call(this,e))).formSubmitted=function(e){a.props.formSubmit(e),a.toggleVisibility()},a.state={visible:!1},a}return Object(v.a)(t,e),Object(y.a)(t,[{key:"toggleVisibility",value:function(){this.setState({visible:!this.state.visible})}},{key:"render",value:function(){var e=this.state.visible;return r.a.createElement("div",{className:"py-3"},r.a.createElement(j.a,{className:"mb-3",variant:"outline-secondary",onClick:this.toggleVisibility.bind(this)},"Add TODO"),r.a.createElement(T.a,{show:e,onHide:this.toggleVisibility.bind(this)},r.a.createElement(T.a.Body,null,r.a.createElement(N,{formSubmit:this.formSubmitted}))))}}]),t}(r.a.Component),H=a(105),x=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(O.a)(this,Object(E.a)(t).call(this,e))).state={intervalId:0,timePassed:!1,dueDateSoon:!1},a}return Object(v.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.timer();var e=setInterval(this.timer.bind(this),1e3);this.setState({intervalId:e})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalId)}},{key:"timer",value:function(){var e=D()(new Date),t=D()(this.props.todo.date),a=D.a.duration(t.diff(e)).asDays();this.setState({timePassed:a<0,dueDateSoon:a>=0&&a<=1})}},{key:"handleComplete",value:function(e){(0,this.props.completeTodo)(e)}},{key:"renderStatus",value:function(){var e=this.state,t=e.timePassed,a=e.dueDateSoon;return r.a.createElement("th",null,t&&r.a.createElement("span",null,r.a.createElement("i",{className:"far fa-sad-tear"})," Passed"),a&&r.a.createElement("span",{className:"text-danger"},r.a.createElement("i",{className:"far fa-grimace"})," Hurry"),!t&&!a&&r.a.createElement("span",null,r.a.createElement("i",{className:"far fa-smile"})," Active"))}},{key:"render",value:function(){var e=this,t=this.props.todo,a=this.state.timePassed;return r.a.createElement("tr",{className:a?"text-muted":""},this.renderStatus(),r.a.createElement("td",null,t.name),r.a.createElement("td",null,r.a.createElement("span",{className:w[t.priority].class},w[t.priority].title)),r.a.createElement("td",null,D()(t.date).format("YYYY-MM-DD hh:mm")),r.a.createElement("td",null,r.a.createElement(j.a,{variant:"outline-secondary",size:"sm",onClick:function(){return e.handleComplete(t.id)}},"Done")),r.a.createElement("td",null,t.photoURL&&r.a.createElement("img",{style:{maxWidth:"30px",paddingRight:"5px"},src:t.photoURL,alt:"User"}),t.displayName))}}]),t}(r.a.Component),I=(a(103),function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(O.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(o)))).renderTodo=function(){return a.props.todos.map(function(e,t){return r.a.createElement(x,{key:t,todo:e,completeTodo:a.props.completeTodo})})},a}return Object(v.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement(H.a,null,r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Status"),r.a.createElement("th",{scope:"col"},"Title"),r.a.createElement("th",{scope:"col"},"Priority"),r.a.createElement("th",{scope:"col"},"Due date"),r.a.createElement("th",{scope:"col"},"Complete"),r.a.createElement("th",{scope:"col"},"Add by"))),r.a.createElement("tbody",null,this.renderTodo()))}}]),t}(r.a.Component)),P=function(e){function t(){return Object(f.a)(this,t),Object(O.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{position:"absolute",backgroundColor:"rgba(192,192,192,0.3)",top:0,left:0,width:"100%",height:"100%",zIndex:1,display:"flex",justifyContent:"center",flexDirection:"column",textAlign:"center"}},"Loading...")}}]),t}(r.a.Component),R=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(O.a)(this,Object(E.a)(t).call(this,e))).state={loading:!0},a}return Object(v.a)(t,e),Object(y.a)(t,[{key:"componentWillMount",value:function(){this.props.fetchTodos()}},{key:"render",value:function(){var e=this.props,t=e.completeTodo,a=e.addTodo,n=e.todoData,o=n.todos,i=n.loading;return r.a.createElement("div",null,r.a.createElement(_,{formSubmit:a,todos:o}),i&&r.a.createElement(P,null),o.length>0&&r.a.createElement(I,{todos:o,completeTodo:t}),!o.length&&r.a.createElement("h6",null,"You don't have anything on your agenda!"))}}]),t}(r.a.Component),Y=Object(l.b)(function(e){return{todoData:e.todoData}},{addTodo:function(e){return function(t){var a=Object(u.a)({},e,{photoURL:p.currentUser.providerData[0].photoURL,displayName:p.currentUser.providerData[0].displayName});t({type:"FETCH_TODOS_START"}),m.push().set(a,function(e){t(e?{type:"FETCH_TODOS_ERROR",error:e}:{type:"FETCH_TODOS_COMPLETED"})})}},completeTodo:function(e){return function(t){t({type:"FETCH_TODOS_START"}),m.child(e).remove().then(function(){t({type:"FETCH_TODOS_COMPLETED"})})}},fetchTodos:function(){return function(e){m.on("value",function(t){e({type:"FETCH_TODOS_EVENT",payload:t.val()})})}}})(R),A=function(e){function t(){return Object(f.a)(this,t),Object(O.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props.signInWithGoogle;return r.a.createElement("div",{className:"h-100 d-flex justify-content-center align-items-center text-center"},r.a.createElement("div",null,r.a.createElement("p",{className:"pr-3"},"Log in"),r.a.createElement(j.a,{variant:"outline-primary",size:"sm",onClick:e},"Sign in with Google")))}}]),t}(r.a.Component),L=function(e){function t(){return Object(f.a)(this,t),Object(O.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.signOut;return r.a.createElement("div",{className:"d-flex border-light border d-flex justify-content-center align-items-center py-3"},r.a.createElement("span",{className:"pr-3"},"Hello ",r.a.createElement("b",null,t.displayName)),r.a.createElement(j.a,{variant:"outline-primary",size:"sm",onClick:a},"Sign out"))}}]),t}(r.a.Component),M=function(e){function t(){return Object(f.a)(this,t),Object(O.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.signInWithGoogle,n=e.signOut;return r.a.createElement("div",{className:"container py-3 h-100"},!t&&r.a.createElement(A,{signInWithGoogle:a}),t&&r.a.createElement(L,{signOut:n,user:t}),t&&r.a.createElement(Y,null))}}]),t}(r.a.Component),F=Object(g.a)({providers:h,firebaseAppAuth:p})(M);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(l.a,{store:Object(c.d)(b,Object(c.a)(s.a))},r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},61:function(e,t,a){e.exports=a(104)},81:function(e,t,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.35f2e78d.chunk.js.map